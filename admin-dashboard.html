<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biomed Admin - Command Center</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="css/admin.css" />
  </head>
  <body>
    <div
      id="toast-container"
      class="toast-container position-fixed top-0 end-0 p-3"
      style="z-index: 1080"
    ></div>
    <div id="logout-overlay">
      <div class="logout-content">
        <i class="bi bi-shield-lock-fill"></i>
        <h2>Signing Out</h2>
        <p>Terminating secure session...</p>
      </div>
    </div>
    <div class="bg-animation">
      <div id="stars"></div>
      <div id="stars2"></div>
      <div id="stars3"></div>
      <div id="stars4"></div>
    </div>

    <div class="d-flex" id="wrapper">
      <!-- Sidebar -->
      <div class="sidebar-wrapper" id="sidebar-wrapper">
        <div class="sidebar-heading">
          <a href="index.html" target="_blank" title="View Live Site"
            >Biomed Admin</a
          >
        </div>
        <div class="list-group list-group-flush">
          <a
            href="#dashboard"
            class="list-group-item list-group-item-action active"
            ><i class="bi bi-speedometer2 me-2"></i> Dashboard</a
          >
          <a href="#products" class="list-group-item list-group-item-action"
            ><i class="bi bi-box-seam me-2"></i> Products</a
          >
          <a href="#messages" class="list-group-item list-group-item-action"
            ><i class="bi bi-envelope-fill me-2"></i> Messages</a
          >
          <a href="#settings" class="list-group-item list-group-item-action"
            ><i class="bi bi-gear-fill me-2"></i> Site Settings</a
          >
        </div>
      </div>

      <!-- Page Content Wrapper -->
      <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg admin-nav">
          <div class="container-fluid">
            <div class="navbar-brand-group">
              <button class="btn btn-primary btn-sm me-3" id="menu-toggle">
                <i class="bi bi-list"></i>
              </button>
              <div class="fw-bold fs-5" id="page-title">Dashboard</div>
            </div>
            <div class="navbar-profile-group">
              <div
                class="d-none d-md-flex align-items-center me-4 clock-display"
              >
                <i class="bi bi-clock-fill me-2"></i
                ><span id="realtime-clock"></span>
              </div>
              <div class="dropdown" id="profile-dropdown">
                <a
                  href="#"
                  class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
                  data-bs-toggle="dropdown"
                >
                  <img
                    src="img/logo.png"
                    alt="Admin"
                    width="32"
                    height="32"
                    class="rounded-circle me-2"
                  /><strong id="admin-name-display">Admin</strong>
                </a>
                <!-- ====================================================== -->
                <!--             THE DEFINITIVE HTML FIX IS HERE            -->
                <!-- ====================================================== -->
                <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="#profile">
                      <i class="bi bi-person-fill me-2"></i> Profile
                    </a>
                  </li>

                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" href="#" id="logout-button">
                      <i class="bi bi-box-arrow-right me-2"></i> Sign out
                    </a>
                  </li>
                </ul>
                <!-- ====================================================== -->
                <!--                  END OF DEFINITIVE FIX                 -->
                <!-- ====================================================== -->
              </div>
            </div>
          </div>
        </nav>

        <main class="container-fluid p-lg-4 p-3">
          <!-- Dashboard Section -->
          <section id="dashboard" class="admin-section">
            <h1 class="section-header">Command Dashboard</h1>
            <p class="lead text-muted mb-4">
              Real-time operational summary of your digital assets.
            </p>
            <div class="row g-4">
              <div class="col-lg-6">
                <a href="#products" class="stat-card" data-section="products"
                  ><div class="stat-icon"><i class="bi bi-box-seam"></i></div>
                  <div class="stat-info">
                    <h4>Product Inventory</h4>
                    <p id="product-count">0</p>
                  </div></a
                >
              </div>
              <div class="col-lg-6">
                <a href="#messages" class="stat-card" data-section="messages"
                  ><div class="stat-icon">
                    <i class="bi bi-envelope-fill"></i>
                  </div>
                  <div class="stat-info">
                    <h4>Incoming Messages</h4>
                    <p id="message-count">0</p>
                  </div></a
                >
              </div>
            </div>
          </section>

          <!-- Products Section -->
          <section id="products" class="admin-section d-none">
            <h1 class="section-header">Product Fleet Management</h1>
            <div class="card glass-card mb-4">
              <div class="card-body">
                <h5 class="card-title">Deploy New Product</h5>
                <form
                  id="product-form"
                  enctype="multipart/form-data"
                  novalidate
                >
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="productName" class="form-label"
                        >Product Name</label
                      ><input
                        type="text"
                        class="form-control"
                        id="productName"
                        required
                      />
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="productCat" class="form-label">Category</label
                      ><input
                        type="text"
                        class="form-control"
                        id="productCat"
                        required
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="productDesc" class="form-label"
                      >Description</label
                    ><textarea
                      class="form-control"
                      id="productDesc"
                      rows="2"
                      required
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="productImage" class="form-label"
                      >Product Image</label
                    ><input
                      class="form-control"
                      type="file"
                      id="productImage"
                      accept="image/*"
                      required
                    />
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Add Product
                  </button>
                </form>
              </div>
            </div>
            <h5 class="mt-4 card-title">Existing Products</h5>
            <div class="table-responsive glass-card p-3 rounded">
              <table class="table table-dark table-hover align-middle">
                <thead>
                  <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Last Updated</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="products-table-body"></tbody>
              </table>
            </div>
          </section>

          <!-- Messages Section -->
          <section id="messages" class="admin-section d-none">
            <h1 class="section-header">Communications Log</h1>
            <div class="table-responsive glass-card p-3 rounded">
              <table class="table table-dark table-hover align-middle">
                <thead>
                  <tr>
                    <th>S.N.</th>
                    <th>Received</th>
                    <th>Sender</th>
                    <th>Subject</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="messages-table-body"></tbody>
              </table>
            </div>
          </section>

          <!-- Settings Section -->
          <section id="settings" class="admin-section d-none">
            <h1 class="section-header">System Settings</h1>
            <p class="lead text-muted mb-4">
              Update site-wide contact and social media information.
            </p>
            <div class="card glass-card">
              <div class="card-body">
                <form id="settings-form">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="phone" class="form-label">Phone Number</label>
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="bi bi-telephone-fill"></i></span
                        ><input type="text" class="form-control" id="phone" />
                      </div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="email" class="form-label"
                        >Contact Email</label
                      >
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="bi bi-envelope-fill"></i></span
                        ><input type="email" class="form-control" id="email" />
                      </div>
                    </div>
                  </div>
                  <hr class="my-4" />
                  <h5 class="card-title mb-3">Social Media Links</h5>
                  <div class="mb-3">
                    <label for="facebookUrl" class="form-label"
                      >Facebook URL</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="bi bi-facebook"></i></span
                      ><input
                        type="url"
                        class="form-control"
                        id="facebookUrl"
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="instagramUrl" class="form-label"
                      >Instagram URL</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="bi bi-instagram"></i></span
                      ><input
                        type="url"
                        class="form-control"
                        id="instagramUrl"
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="linkedInUrl" class="form-label"
                      >LinkedIn URL</label
                    >
                    <div class="input-group">
                      <span class="input-group-text"
                        ><i class="bi bi-linkedin"></i></span
                      ><input
                        type="url"
                        class="form-control"
                        id="linkedInUrl"
                      />
                    </div>
                  </div>
                  <button type="submit" class="btn btn-success mt-3">
                    Save Settings
                  </button>
                </form>
              </div>
            </div>
          </section>

          <!-- Profile Section -->
          <section id="profile" class="admin-section d-none">
            <h1 class="section-header">Admin Profile</h1>
            <div class="row g-4">
              <div class="col-lg-8">
                <div class="card glass-card mb-4">
                  <div class="card-body">
                    <h5 class="card-title">Personal Details</h5>
                    <form id="profile-details-form">
                      <div class="mb-3">
                        <label for="profileFullName" class="form-label"
                          >Full Name</label
                        ><input
                          type="text"
                          class="form-control"
                          id="profileFullName"
                          required
                        />
                      </div>

                      <button type="submit" class="btn btn-primary">
                        Update Details
                      </button>
                    </form>
                  </div>
                </div>
                <div class="card glass-card">
                  <div class="card-body">
                    <h5 class="card-title">Change Password</h5>
                    <form id="profile-password-form">
                      <div class="mb-3">
                        <label for="currentPassword" class="form-label"
                          >Current Password</label
                        ><input
                          type="password"
                          class="form-control"
                          id="currentPassword"
                          required
                        />
                      </div>
                      <div class="mb-3">
                        <label for="newPassword" class="form-label"
                          >New Password</label
                        ><input
                          type="password"
                          class="form-control"
                          id="newPassword"
                          required
                        />
                      </div>
                      <button type="submit" class="btn btn-success">
                        Change Password
                      </button>
                    </form>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="card glass-card text-center">
                  <div class="card-body">
                    <h5 class="card-title mb-3">Profile Avatar</h5>
                    <img
                      src="img/logo.png"
                      alt="Admin Avatar"
                      id="profile-avatar-preview"
                      class="profile-avatar-preview"
                    />
                    <form id="profile-avatar-form" class="mt-3">
                      <label for="avatarUpload" class="btn btn-info"
                        ><i class="bi bi-upload me-2"></i> Upload New
                        Image</label
                      ><input
                        type="file"
                        id="avatarUpload"
                        name="avatar"
                        class="d-none"
                        accept="image/*"
                      />
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- Modals (Confirmation, Edit Product, etc.) -->
    <div class="modal fade" id="confirmationModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header border-0">
            <h5 class="modal-title" id="confirmationModalTitle">
              Confirm Action
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p id="confirmationModalBody">Are you sure?</p>
          </div>
          <div class="modal-footer border-0">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel</button
            ><button
              type="button"
              class="btn btn-danger"
              id="confirm-danger-btn"
            >
              Confirm
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="viewMessageModal"
      tabindex="-1"
      aria-labelledby="viewMessageModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content glass-card">
          <div class="modal-header">
            <h5 class="modal-title" id="messageModalSubject">
              Message Details
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <strong class="text-muted">From:</strong>
              <p id="messageModalFrom" class="fs-5"></p>
            </div>
            <div class="mb-3">
              <strong class="text-muted">Received:</strong>
              <p id="messageModalDate"></p>
            </div>
            <hr class="my-3" />
            <div class="mt-3">
              <strong class="text-muted">Message:</strong>
              <p
                id="messageModalBody"
                class="mt-2"
                style="white-space: pre-wrap"
              ></p>
            </div>
          </div>
          <div class="modal-footer border-0">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/admin.js"></script>
  </body>
</html>
